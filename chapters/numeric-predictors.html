<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Transforming Numeric Predictors – Applied Machine Learning for Tabular Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../chapters/categorical-predictors.html" rel="next">
<link href="../chapters/missing-data.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ac94f01b84e0cf733daf4ed4b084c36a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7T996NL20Z"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-7T996NL20Z', { 'anonymize_ip': true});
</script>
<link href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title"><span id="sec-numeric-predictors" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Transforming Numeric Predictors</span></span></h1>
        </a>     
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../"></a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/aml4td/website/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/news.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">News</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/contributing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contributing</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/whole-game.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Whole Game</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Preparation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/initial-data-splitting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Initial Data Splitting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/missing-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Missing Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/numeric-predictors.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Transforming Numeric Predictors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/categorical-predictors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Working with Categorical Predictors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/embeddings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Embeddings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/interactions-nonlinear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Interactions and Nonlinear Features</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Optimization</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/overfitting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Overfitting</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/resampling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Measuring Performance with Resampling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/grid-search.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Grid Search</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/iterative-search.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Iterative Search</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/feature-selection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Feature Selection</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../chapters/comparing-models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Comparing Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Classification</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Regression</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Characterization</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Finalization</span></span>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#sec-general-transformation" id="toc-sec-general-transformation" class="nav-link active" data-scroll-target="#sec-general-transformation"><span class="header-section-number">5.1</span> What are Problematic Characteristics, and When Should Transformations be Applied?</a></li>
  <li><a href="#sec-skewness" id="toc-sec-skewness" class="nav-link" data-scroll-target="#sec-skewness"><span class="header-section-number">5.2</span> Resolving Asymmetry and Skewness</a></li>
  <li><a href="#sec-common-scale" id="toc-sec-common-scale" class="nav-link" data-scroll-target="#sec-common-scale"><span class="header-section-number">5.3</span> Standardizing to a Common Scale</a></li>
  <li><a href="#sec-spatial-sign" id="toc-sec-spatial-sign" class="nav-link" data-scroll-target="#sec-spatial-sign"><span class="header-section-number">5.4</span> Spatial Sign</a></li>
  <li><a href="#chapter-references" id="toc-chapter-references" class="nav-link" data-scroll-target="#chapter-references">Chapter References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span id="sec-numeric-predictors" class="quarto-section-identifier"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Transforming Numeric Predictors</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Data that are available for modeling are often collected passively without the specific purpose of being used for building a predictive model. As an example, the Ames Housing data contains a wealth of information on houses in Ames, Iowa. But this available data may not contain the most relevant measurements for predicting house price. This may be due to the fact that important predictors were not measured. Or, it may be because the predictors we have collected are not in the best form to allow models to uncover the relationship between the predictors and the response.</p>
<p>As mentioned previously, feature engineering is the process of representing your predictor data so that the model has to do the least amount of work to explain the outcome effectively. A tool of feature engineering is predictor transformations. Some models also need predictors to be transformed to meet the model’s mathematical requirements (i.e., pre-processing). In this chapter we will review transformations for quantitative predictors.</p>
<p>We will begin by describing transformations that are applied to one predictor at a time that yield a revised for of the predictor (one in, one out). After these, an example of a <em>group</em> transformation is described called the <em>spatial sign</em>. Later, <a href="embeddings.html" class="quarto-xref"><span>Chapter 7</span></a> will describe different types of many-to-many transformations such as principal component analysis (PCA) and multidimensional scaling (MDS). Additionally, in <a href="interactions-nonlinear.html" class="quarto-xref"><span>Chapter 8</span></a>, we will examine techniques for expanding a single numeric predictor to many predictors (one in, many out).</p>
<p>Let’s begin by understanding some general data characteristics that need to be addressed via feature engineering and when transformations should be applied.</p>
<section id="sec-general-transformation" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="sec-general-transformation"><span class="header-section-number">5.1</span> What are Problematic Characteristics, and When Should Transformations be Applied?</h2>
<p>Common problematic characteristics that occur across individual predictors are:</p>
<ul>
<li>skewed or unusually shaped distributions,</li>
<li>sample(s) that have extremely large or small values, and</li>
<li>vastly disparate scales.</li>
</ul>
<p>Some models, like those that are tree-based, are able to tolerate these characteristics. However, these characteristics can detrimentally affect most other models. Techniques used to address these problems generally involve transformation parameters. For example, to place the predictors on the same scale, we would subtract the mean of a predictor from a sample and then divide by the standard deviation. This is know as standardizing and will be discussed in the next section.</p>
<p>What data should be used to estimate the mean and standard deviation? Recall, the training data set was used to estimate model parameters. Similarly, we will use the training data to estimate transformation parameters. When the test set or any future data set are standardized, the process will use the estimates from the training data set. Any model fit that uses these standardized predictors would want new samples being predicted to have the same reference distribution.</p>
<p>Suppose that a predictor column had an underlying Gaussian distribution with a sample mean estimate of 5.0 and a sample standard deviation of 1.0. Suppose a new sample has a predictor value of 3.7. For the training set, this new value lands around the 10th percentile and would be standardized to a value of -1.3. The new value is relative to the training set distribution. Also note that, in this scenario, it would be impossible to standardize using a recomputed standard deviation for the new sample (which means we try to divide with a zero standard deviation).</p>
<p>Many transformations that involve a single predictor change the data distribution. Most predictive models do not place specific parametric assumptions on the predictor variables (e.g., require normality), but some distributions might facilitate better predictive performance than others.</p>
<p>TODO some based on convention or scientific knowledge. Others like the arc-sin (ref The arcsine is asinine: the analysis of proportions in ecology) or logit? See <a href="https://github.com/aml4td/website/issues/10">issue #10</a>.</p>
<p>The next two sections will consider two classes of transformations for individual predictors: those that resolve distributional skewness and those that convert each predictor to a common distribution (or scale).</p>
</section>
<section id="sec-skewness" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="sec-skewness"><span class="header-section-number">5.2</span> Resolving Asymmetry and Skewness</h2>
<p>An asymmetric statistical distribution is one in which the probability of a sample occurring is not symmetric around the center of the distribution (e.g., the mean). For example, <a href="#fig-ames-lot-area" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> (panel a) shows the training set distribution of the lot area of houses in Ames. There is a much higher likelihood of the lot area being lower than the mean (or median) lot size. There are fewer large lots than there are proportionally smaller lots. And, in a few cases, the lot sizes can be extremely large.</p>
<p>The skew of a distribution indicates the direction and magnitude of the asymmetry. It can be quantified using the skewness statistic:</p>
<p><span class="math display">\[\begin{align}
  skewness &amp;= \frac{1}{(n-1)v^{3/2}} \sum_{i=1}^n (x_i-\overline{x})^3 \notag \\
  \text{where}\quad  v &amp;= \frac{1}{(n-1)}\sum_{i=1}^n (x_i-\overline{x})^2 \notag
\end{align}
\]</span></p>
<p>where values near zero indicate a symmetric distribution, positive values correspond a right skew, and negative values left skew. The lot size data are significantly right-skewed (with a skewness value of 13.5). As previously mentioned, there are 2 samples in the training set that sit far beyond the mainstream of the data.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-ames-lot-area" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ames-lot-area-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="numeric-predictors_files/figure-html/fig-ames-lot-area-1.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ames-lot-area-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.1: Lot area for houses in Ames, IA. The raw data (a) are shown along with transformed versions using the Yeo-Johnson (b), percentile (c), and ordered quantile normalization (d) transformations.
</figcaption>
</figure>
</div>
</div>
</div>
<p>One might infer that “samples far beyond the mainstream of the data” is synonymous with the term “outlier”; The Cambridge dictionary defines an outlier as</p>
<blockquote class="blockquote">
<p>a person, thing, or fact that is very different from other people, things, or facts […]</p>
</blockquote>
<p>or</p>
<blockquote class="blockquote">
<p>a place that is far from the main part of something</p>
</blockquote>
<p>These statements imply that outliers belong to a different distribution than the bulk of the data. For example, a typographical error or an incorrect merging of data sources could be the cause.</p>
<p>The <span class="citation" data-cites="nist">Croarkin et al. (<a href="#ref-nist" role="doc-biblioref">2012</a>)</span> describes them as</p>
<blockquote class="blockquote">
<p>an observation that lies an abnormal distance from other values in a random sample from a population</p>
</blockquote>
<p>In our experience, researchers are quick to label (and discard) extreme data points as outliers. Often, especially when the sample size is not large, these data points are not abnormal but belong to a highly skewed distribution. They are ordinary in a distributional sense. That is the most likely case here; some houses in Ames have very large lot areas, but they certainly fall under the definition of “houses in Ames, Iowa.” These values are genuine, just extreme.</p>
<p>This, by itself, is okay. However, suppose that this column is used in a calculation that involves squaring values, such as Euclidean distance or the sample variance. Extreme values in a skewed distribution can influence some predictive models and cause them to place more emphasis on these predictors<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. When the predictor is left in its original form, the extreme samples can end up degrading a model’s predictive performance.</p>
<p>One way to resolve skewness is to apply a transformation that makes the data more symmetric. There are several methods to do this. The first is to use a standard transformation, such as logarithmic or the square root, the latter being a better choice when the skewness is not drastic, and the data contains zeros. A simple visualization of the data can be enough to make this choice. The problem is when there are many numeric predictors; it may be inefficient to visually inspect each predictor to make a subjective judgment on what if any, transformation function to apply.</p>
<p><span class="citation" data-cites="Box1964p3648">Box and Cox (<a href="#ref-Box1964p3648" role="doc-biblioref">1964</a>)</span> defined a power family of transformations that use a single parameter, <span class="math inline">\(\lambda\)</span>, for different methods:</p>
<div class="columns">
<div class="column" style="width:10%;">

</div><div class="column" style="width:40%;">
<ul>
<li>no transformation via <span class="math inline">\(\lambda = 1.0\)</span></li>
<li>square (<span class="math inline">\(x^2\)</span>) via <span class="math inline">\(\lambda = 2.0\)</span></li>
<li>square root (<span class="math inline">\(\sqrt{x}\)</span>) via <span class="math inline">\(\lambda = 0.5\)</span></li>
</ul>
</div><div class="column" style="width:40%;">
<ul>
<li>logarithmic (<span class="math inline">\(\log{x}\)</span>) via <span class="math inline">\(\lambda = 0.0\)</span></li>
<li>inverse square root (<span class="math inline">\(1/\sqrt{x}\)</span>) via <span class="math inline">\(\lambda = -0.5\)</span></li>
<li>inverse (<span class="math inline">\(1/x\)</span>) via <span class="math inline">\(\lambda = -1.0\)</span></li>
</ul>
</div><div class="column" style="width:10%;">

</div>
</div>
<p>and others in between. The transformed version of the variable is:</p>
<p><span class="math display">\[
x^* =
\begin{cases} \lambda^{-1}(x^\lambda-1) &amp; \text{if $\lambda \ne 0$,}
\\[3pt]
log(x) &amp;\text{if $\lambda = 0$.}
\end{cases}
\]</span></p>
<p>Their paper defines this as a supervised transformation of a non-negative outcome (<span class="math inline">\(y\)</span>) in a linear regression model. They find a value of <span class="math inline">\(\lambda\)</span> that minimizes the residual sums of squared errors. In our case, we can co-opt this method to use for unsupervised transformations of non-negative predictors (in a similar manner as <span class="citation" data-cites="asar2017estimating">Asar, Ilk, and Dag (<a href="#ref-asar2017estimating" role="doc-biblioref">2017</a>)</span>). <span class="citation" data-cites="yeojohnson">Yeo and Johnson (<a href="#ref-yeojohnson" role="doc-biblioref">2000</a>)</span> extend this method by allowing the data to be negative via a slightly different transformation:</p>
<p><span class="math display">\[
x^* =
\begin{cases}
\lambda^{-1}\left[(x + 1)^\lambda-1\right] &amp; \text{if $\lambda \ne 0$ and $x \ge 0$,} \\[3pt]
log(x + 1) &amp;\text{if $\lambda = 0$ and $x \ge 0$.} \\[3pt]
-(2 - \lambda)^{-1}\left[(-x + 1)^{2 - \lambda}-1\right] &amp; \text{if $\lambda \ne 2$ and $x &lt; 0$,} \\[3pt]
-log(-x + 1) &amp;\text{if $\lambda = 2$ and $x &lt; 0$.}
\end{cases}
\]</span></p>
<p>In either case, maximum likelihood is also used to estimate the <span class="math inline">\(\lambda\)</span> parameter.</p>
<p>In practice, these two transformations might be limited to predictors with acceptable density. For example, the transformation may not be appropriate for a predictor with a few unique values. A threshold of five or so unique values might be a proper rule of thumb (see the discussion in <a href="feature-selection.html#sec-unsupervised-selection" class="quarto-xref"><span>Section 13.4</span></a>). On occasion the maximum likelihood estimates of <span class="math inline">\(\lambda\)</span> diverge to huge values; it is also sensible to use values within a suitable range. Also, the estimate will never be absolute zero. Implementations usually apply a log transformation when the <span class="math inline">\(\hat{\lambda}\)</span> is within some range of zero (say between <span class="math inline">\(\pm 0.01\)</span>)<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>For the lot area predictor, the Box-Cox and Yeo-Johnson techniques both produce an estimate of <span class="math inline">\(\hat{\lambda} = 0.15\)</span>. The results are shown in <a href="#fig-ames-lot-area" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> (panel b). There is undoubtedly less right-skew, and the data are more symmetric with a new skewness value of 0.114 (much closer to zero). However, there are still outlying points.</p>
<p>There are numerous other transformations that attempt to make the distribution of a variable more Gaussian. <a href="#tbl-transforms" class="quarto-xref">Table&nbsp;<span>5.1</span></a> shows several more, most of which are indexed by a transformation parameter <span class="math inline">\(\lambda\)</span>.</p>
<div class="columns">
<div class="column" style="width:15%;">

</div><div class="column" style="width:70%;">
<div id="tbl-transforms" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<div aria-describedby="tbl-transforms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 60%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Name</th>
<th style="text-align: center;">Equation</th>
<th style="text-align: center;">Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Modulus</td>
<td style="text-align: center;"><span class="math display">\[x^* = \begin{cases} sign(x)\lambda^{-1}\left[(|x|+1)^\lambda-1\right] &amp; \text{if $\lambda \neq 0$,}\\[3pt]
sign(x) \log{(|x|+1)} &amp;\text{if $\lambda = 0$}
\end{cases}\]</span></td>
<td style="text-align: center;"><span class="citation" data-cites="john1980alternative">John and Draper (<a href="#ref-john1980alternative" role="doc-biblioref">1980</a>)</span></td>
</tr>
<tr class="even">
<td>Bickel-Docksum</td>
<td style="text-align: center;"><span class="math display">\[x^* = \lambda^{-1}\left[sign(x)|x| - 1\right]\quad\text{if $\lambda \neq 0$}\]</span></td>
<td style="text-align: center;"><span class="citation" data-cites="bickel1981analysis">Bickel and Doksum (<a href="#ref-bickel1981analysis" role="doc-biblioref">1981</a>)</span></td>
</tr>
<tr class="odd">
<td>Glog / Gpower</td>
<td style="text-align: center;"><span class="math display">\[x^* = \begin{cases} \lambda^{-1}\left[({x+ \sqrt{x^2+1}})^\lambda-1\right]  &amp; \text{if $\lambda \neq 0$,}\\[3pt]
\log({x+ \sqrt{x^2+1}}) &amp;\text{if $\lambda = 0$}
\end{cases}\]</span></td>
<td style="text-align: center;"><span class="citation" data-cites="durbin2002variance">Durbin et al. (<a href="#ref-durbin2002variance" role="doc-biblioref">2002</a>)</span>, <span class="citation" data-cites="kelmansky2013new">Kelmansky, Martínez, and Leiva (<a href="#ref-kelmansky2013new" role="doc-biblioref">2013</a>)</span></td>
</tr>
<tr class="even">
<td>Neglog</td>
<td style="text-align: center;"><span class="math display">\[x^* = sign(x) \log{(|x|+1)}\]</span></td>
<td style="text-align: center;"><span class="citation" data-cites="whittaker2005neglog">Whittaker, Whitehead, and Somers (<a href="#ref-whittaker2005neglog" role="doc-biblioref">2005</a>)</span></td>
</tr>
<tr class="odd">
<td>Dual</td>
<td style="text-align: center;"><span class="math display">\[x^* = (2\lambda)^{-1}\left[x^\lambda - x^{-\lambda}\right]\quad\text{if $\lambda \neq 0$}\]</span></td>
<td style="text-align: center;"><span class="citation" data-cites="yang2006modified">Yang (<a href="#ref-yang2006modified" role="doc-biblioref">2006</a>)</span></td>
</tr>
</tbody>
</table>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-tbl" id="tbl-transforms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;5.1: Examples of other families of transformations for dense numeric predictors.
</figcaption>
</figure>
</div>
</div><div class="column" style="width:15%;">

</div>
</div>
<p>Skewness can also be resolved using techniques related to distributional percentiles. A percentile is a value with a specific proportion of data below it. For example, for the original lot area data, the 0.1 percentile is 4,726 square feet, which means that 10% of the training set has lot areas less than 4,726 square feet. The minimum, median, and maximum are the 0, 50th and 100th percentiles, respectively.</p>
<p>Numeric predictors can be converted to their percentiles, and these data, inherently between zero and one, are used in their place. Probability theory tells us that the distribution of the percentiles should resemble a uniform distribution. This results from the transformed version of the lot area shown in <a href="#fig-ames-lot-area" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> (panel c). For new data, values beyond the range of the original predictor data can be truncated to values of zero or one, as appropriate.</p>
<p>Additionally, the original predictor data can be coerced to a specific probability distribution. <span class="citation" data-cites="ORQ">Peterson and Cavanaugh (<a href="#ref-ORQ" role="doc-biblioref">2020</a>)</span> define the Ordered Quantile (ORQ) normalization procedure. It estimates a transformation of the data to emulate the true normalizing function where “normalization” literally maps the data to a standard normal distribution. In other words, we can coerce the original distribution to a near exact replica of a standard normal. <a href="#fig-ames-lot-area" class="quarto-xref">Figure&nbsp;<span>5.1</span></a> (panel d) illustrates the result for the lot area. In this instance, the resulting distribution is precisely what would be seen if the true distribution was Gaussian with zero mean and a standard deviation of one.</p>
<p>In <a href="#sec-spatial-sign" class="quarto-xref"><span>Section 5.4</span></a> below, another tool for attenuating outliers in <em>groups</em> of predictors is discussed.</p>
<p><a href="https://tidymodels.aml4td.org/chapters/numeric-predictors.html#sec-recipe-skewness"><i class="fa-brands fa-r-project fa-Large" aria-label="r-project"></i></a></p>
</section>
<section id="sec-common-scale" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="sec-common-scale"><span class="header-section-number">5.3</span> Standardizing to a Common Scale</h2>
<p>Another goal for transforming individual predictors is to convert them to a common scale. This is a pre-processing requirement for some models. For example, a <em>K</em>-nearest neighbors model computes the distances between data points. Suppose Euclidean distance is used with the Ames data. One predictor, the year a house was built, has training set values ranging between 1872 and 2010. Another, the number of bathrooms, ranges from 0 to 5. If these raw data were used to compute the distance, the value would be inappropriately dominated by the year variable simply because its values were large. See TODO appendix for a summary of which models require a common scale.</p>
<p>The previous section discussed two transformations that automatically convert predictors to a common distribution. The percentile transformation generates values roughly uniformly distributed on the <code>[0, 1]</code> scale, and the ORQ transformation results in predictors with standard normal distributions. However, two other standardization methods are commonly used.</p>
<p>First is centering and scaling (as previously mentioned). To convert to a common scale, the mean (<span class="math inline">\(\bar{x}\)</span>) and standard deviation (<span class="math inline">\(\hat{s}\)</span>) are computed from the training data and the standardized version of the data are <span class="math inline">\(x^* = (x - \bar{x}) / \hat{s}\)</span>. The shape of the original distribution is preserved; only the location and scale are modified to be zero and one, respectively.</p>
<p>In <a href="categorical-predictors.html#sec-indicators" class="quarto-xref"><span>Section 6.2</span></a>, methods are discussed to convert categorical predictors to a numeric format. The standard tool is to create a set of columns consisting of zeros and ones called <em>indicator</em> or <em>dummy variables</em>. When centering and scaling, what should we do with these binary features? These should be treated the same as the dense numeric predictors. The result is that a binary column will still have two unique values, one positive and one negative. The values will depend on the prevalence of the zeros and ones in the training data. While this seems awkward, it is required to ensure each predictor has the same mean and standard deviation. Note that if the predictor set is <em>only</em> scaled, <span class="citation" data-cites="twosd">Gelman (<a href="#ref-twosd" role="doc-biblioref">2008</a>)</span> suggests that the indicator variables be divided by two standard deviations instead of one.</p>
<p><a href="#fig-standardization" class="quarto-xref">Figure&nbsp;<span>5.2</span></a>(b) shows the results of centering and scaling the gross living area predictor from the Ames data. Note that the shape of the distribution does not change; only the magnitude of the values is different.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-standardization" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-standardization-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="numeric-predictors_files/figure-html/fig-standardization-1.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:92.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-standardization-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.2: The original gross living area data and two standardized versions.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Another common approach is range standardization. Based on the training set, a predictor’s minimum and maximum values are computed, and the data are transformed to a <code>[0, 1]</code> scale via</p>
<p><span class="math display">\[
x^* = \frac{x - \min(x)}{\max(x) - \min(x)}
\]</span></p>
<p>When new data are outside the training set range, they can either be clipped to zero/one or allowed to go slightly beyond the intended range. The nice feature of this approach is that the range of the raw numeric predictors matches the range of any indicator variables created from previously categorical predictors. However, this does not imply that the distributional properties are the same (e.g., mean and variance) across predictors. Whether this is an issue depends on the model being used downstream. <a href="#fig-standardization" class="quarto-xref">Figure&nbsp;<span>5.2</span></a>(c) shows the result when the gross living predictor is range transformed. Notice that the shape of the distributions across panels (a), (b), and (c) are the same — only the scale of the x-axis changes.</p>
<p><a href="https://tidymodels.aml4td.org/chapters/numeric-predictors.html#sec-recipe-standardize"><i class="fa-brands fa-r-project fa-Large" aria-label="r-project"></i></a></p>
</section>
<section id="sec-spatial-sign" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="sec-spatial-sign"><span class="header-section-number">5.4</span> Spatial Sign</h2>
<p>Some transformations involve multiple predictors. An upcoming chapter describes a specific class of simultaneous <em>feature extraction</em> transformations. Here, we will focus on the spatial sign transformation <span class="citation" data-cites="Serneels">(<a href="#ref-Serneels" role="doc-biblioref">Serneels, Nolf, and Espen 2006</a>)</span>. This method, which requires <span class="math inline">\(p\)</span> standardized predictors as inputs, projects the data points onto a <span class="math inline">\(p\)</span> dimensional unit hypersphere. This makes all of the data points equally distant from the center of the hypersphere, thereby eliminating all potential outliers. The equation is:</p>
<p><span class="math display">\[
x^*_{ij}=\frac{x_{ij}}{\sum\limits^{p}_{j=1} x_{ij}^2}
\]</span></p>
<p>Notice that all of the predictors are simultaneously modified and that the calculations occur in a row-wise pattern. Because of this, the individual predictor columns become combinations of the other columns and now reflect more than the individual contribution of the original predictors. In other words, after this transformation is applied, if any individual predictor is considered important, its significance should be attributed to all of the predictors used in the transformation.</p>
<p><a href="#fig-ames-lot-living-area" class="quarto-xref">Figure&nbsp;<span>5.3</span></a> shows predictors from the Ames data. In these data, we somewhat arbitrarily labeled 29 samples as being “far away” from most of the data in either lot area and/or gross living area. Each of these predictors may follow a right-skewed distribution, or there is some other characteristic that is associated with these samples. Regardless, we would like to transform these predictors simultaneously.</p>
<p>The second panel of the data shows the same predictors <em>after</em> an orderNorm transformation. Note that, after this operation, the outlying values appear less extreme.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-ames-lot-living-area" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-ames-lot-living-area-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="numeric-predictors_files/figure-html/fig-ames-lot-living-area-1.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-ames-lot-living-area-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5.3: Lot area (x) versus gross living area (y) in raw format as well as with order-norm and spatial sign transformations.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The panel on the right shows the data after applying the spatial sign. The data now form a circle centered at (0, 0) where the previously flagged instances are no longer distributionally abnormal. The resulting bivariate distribution is quite jarring when compared to the original. However, these new versions of the predictors can still be important components in a machine-learning model.</p>
<p><a href="https://tidymodels.aml4td.org/chapters/numeric-predictors.html#sec-recipe-spatialp-sign"><i class="fa-brands fa-r-project fa-Large" aria-label="r-project"></i></a></p>
</section>
<section id="chapter-references" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="chapter-references">Chapter References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-asar2017estimating" class="csl-entry" role="listitem">
Asar, O, O Ilk, and O Dag. 2017. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=Estimating+Box+Cox+power+transformation+parameter+via+goodness+of+fit+tests&amp;as_ylo=2017&amp;as_yhi=2017&amp;btnG=">Estimating <span>Box-Cox</span> Power Transformation Parameter via Goodness-of-Fit Tests</a>.”</span> <em>Communications in Statistics-Simulation and Computation</em> 46 (1): 91–105.
</div>
<div id="ref-bickel1981analysis" class="csl-entry" role="listitem">
Bickel, P, and K Doksum. 1981. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=An+analysis+of+transformations+revisited&amp;as_ylo=1981&amp;as_yhi=1981&amp;btnG=">An Analysis of Transformations Revisited</a>.”</span> <em>Journal of the American Statistical Association</em> 76 (374): 296–311.
</div>
<div id="ref-Box1964p3648" class="csl-entry" role="listitem">
Box, GEP, and D Cox. 1964. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=An+Analysis+of+Transformations&amp;as_ylo=1964&amp;as_yhi=1964&amp;btnG=">An Analysis of Transformations</a>.”</span> <em>Journal of the Royal Statistical Society. Series B (Methodological)</em>, 211–52.
</div>
<div id="ref-nist" class="csl-entry" role="listitem">
Croarkin, C, P Tobias, J Filliben, B Hembree, W Guthrie, L Trutna, and J Prins, eds. 2012. <em><span class="nocase">NIST/SEMATECH e-Handbook of Statistical Methods</span></em>. NIST/SEMATECH. <a href="http://www.itl.nist.gov/div898/handbook/">http://www.itl.nist.gov/div898/handbook/</a>.
</div>
<div id="ref-durbin2002variance" class="csl-entry" role="listitem">
Durbin, B, J Hardin, D Hawkins, and D Rocke. 2002. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=A+variance+stabilizing+transformation+for+gene+expression+microarray+data&amp;as_ylo=2002&amp;as_yhi=2002&amp;btnG=">A Variance-Stabilizing Transformation for Gene-Expression Microarray Data</a>.”</span> <em>Bioinformatics</em> 18.
</div>
<div id="ref-twosd" class="csl-entry" role="listitem">
Gelman, A. 2008. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=Scaling+regression+inputs+by+dividing+by+two+standard+deviations&amp;as_ylo=2008&amp;as_yhi=2008&amp;btnG=">Scaling Regression Inputs by Dividing by Two Standard Deviations</a>.”</span> <em>Statistics in Medicine</em> 27 (15): 2865–73.
</div>
<div id="ref-john1980alternative" class="csl-entry" role="listitem">
John, J, and N Draper. 1980. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=An+alternative+family+of+transformations&amp;as_ylo=1980&amp;as_yhi=1980&amp;btnG=">An Alternative Family of Transformations</a>.”</span> <em>Journal of the Royal Statistical Society Series <span>C</span>: Applied Statistics</em> 29 (2): 190–97.
</div>
<div id="ref-kelmansky2013new" class="csl-entry" role="listitem">
Kelmansky, D, E Martínez, and V Leiva. 2013. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=A+new+variance+stabilizing+transformation+for+gene+expression+data+analysis&amp;as_ylo=2013&amp;as_yhi=2013&amp;btnG=">A New Variance Stabilizing Transformation for Gene Expression Data Analysis</a>.”</span> <em>Statistical Applications in Genetics and Molecular Biology</em> 12 (6): 653–66.
</div>
<div id="ref-ORQ" class="csl-entry" role="listitem">
Peterson, R, and J Cavanaugh. 2020. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=Ordered+quantile+normalization+a+semiparametric+transformation+built+for+the+cross+validation+era&amp;as_ylo=2020&amp;as_yhi=2020&amp;btnG=">Ordered Quantile Normalization: A Semiparametric Transformation Built for the Cross-Validation Era</a>.”</span> <em>Journal of Applied Statistics</em> 47 (13-15): 2312–27.
</div>
<div id="ref-Serneels" class="csl-entry" role="listitem">
Serneels, S, E De Nolf, and P Van Espen. 2006. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=Spatial+Sign+Preprocessing+A+Simple+Way+to+Impart+Moderate+Robustness+to+Multivariate+Estimators&amp;as_ylo=2006&amp;as_yhi=2006&amp;btnG=">Spatial Sign Preprocessing: A Simple Way to Impart Moderate Robustness to Multivariate Estimators</a>.”</span> <em>Journal of Chemical Information and Modeling</em> 46 (3): 1402–9.
</div>
<div id="ref-whittaker2005neglog" class="csl-entry" role="listitem">
Whittaker, J, C Whitehead, and M Somers. 2005. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=The+neglog+transformation+and+quantile+regression+for+the+analysis+of+a+large+credit+scoring+database&amp;as_ylo=2005&amp;as_yhi=2005&amp;btnG=">The Neglog Transformation and Quantile Regression for the Analysis of a Large Credit Scoring Database</a>.”</span> <em>Journal of the Royal Statistical Society Series <span>C</span>: Applied Statistics</em> 54 (5): 863–78.
</div>
<div id="ref-yang2006modified" class="csl-entry" role="listitem">
Yang, Z. 2006. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=A+modified+family+of+power+transformations&amp;as_ylo=2006&amp;as_yhi=2006&amp;btnG=">A Modified Family of Power Transformations</a>.”</span> <em>Economics Letters</em> 92 (1): 14–19.
</div>
<div id="ref-yeojohnson" class="csl-entry" role="listitem">
Yeo, I, and R Johnson. 2000. <span>“<a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C7&amp;q=A+New+Family+of+Power+Transformations+to+Improve+Normality+or+Symmetry&amp;as_ylo=2000&amp;as_yhi=2000&amp;btnG=">A New Family of Power Transformations to Improve Normality or Symmetry</a>.”</span> <em>Biometrika</em> 87 (4): 954–59.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>The field of robust techniques is predicated on making statistical calculations insensitive to these types of data points.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>If you’ve never seen it, the “hat” notation (e.g.&nbsp;<span class="math inline">\(\hat{\lambda}\)</span>) indicates an estimate of some unknown parameter.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/aml4td\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../chapters/missing-data.html" class="pagination-link" aria-label="Missing Data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Missing Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../chapters/categorical-predictors.html" class="pagination-link" aria-label="Working with Categorical Predictors">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Working with Categorical Predictors</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js" type="text/javascript"></script>
<script type="text/javascript">
(function(d) {
  d.querySelectorAll(".pseudocode-container").forEach(function(el) {
    let pseudocodeOptions = {
      indentSize: el.dataset.indentSize || "1.2em",
      commentDelimiter: el.dataset.commentDelimiter || "//",
      lineNumber: el.dataset.lineNumber === "true" ? true : false,
      lineNumberPunc: el.dataset.lineNumberPunc || ":",
      noEnd: el.dataset.noEnd === "true" ? true : false,
      titlePrefix: el.dataset.algTitle || "Algorithm"
    };
    pseudocode.renderElement(el.querySelector(".pseudocode"), pseudocodeOptions);
  });
})(document);
(function(d) {
  d.querySelectorAll(".pseudocode-container").forEach(function(el) {
    titleSpan = el.querySelector(".ps-root > .ps-algorithm > .ps-line > .ps-keyword")
    titlePrefix = el.dataset.algTitle;
    titleIndex = el.dataset.chapterLevel ? el.dataset.chapterLevel + "." + el.dataset.pseudocodeIndex : el.dataset.pseudocodeIndex;
    titleSpan.innerHTML = titlePrefix + " " + titleIndex + " ";
  });
})(document);
</script>




</body></html>